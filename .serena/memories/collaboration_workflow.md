# Claude Code 與 Cursor 協作工作流程

## 🔄 完整協作流程

### Phase 1: 需求接收與分析 (Claude Code)
```
用戶需求 → Claude Code 分析 → 制定執行策略
```

#### 執行步驟
1. **需求理解**
   - 仔細分析用戶提出的需求
   - 識別關鍵要求和約束條件
   - 評估任務複雜度和所需資源

2. **可行性評估**
   - 檢查是否有足夠的專案資訊
   - 確認技術可行性
   - 評估所需時間和資源

3. **策略制定**
   - 將大任務分解為可執行的小步驟
   - 決定哪些部分由 Claude Code 處理，哪些交給 Cursor
   - 設定品質檢核點和人工確認節點

### Phase 2: 計畫制定與指引準備 (Claude Code)
```
策略 → 詳細計畫 → 工作指引 → Serena Memory 更新
```

#### 執行步驟
1. **建立工作紀錄**
   ```bash
   # 在專案根目錄建立或更新
   WORK_LOG.md
   ```

2. **制定詳細工作指引**
   - 使用 `work_instructions_template.md` 範本
   - 填寫具體的執行步驟和技術要求
   - 明確產出規格和品質標準

3. **更新 Serena Memory**
   ```bash
   # 更新以下記憶體檔案
   current_work_instructions.md  # 當前工作指引
   work_log_updates.md          # 工作紀錄更新
   ```

### Phase 3: 任務執行 (Cursor)
```
讀取指引 → 執行任務 → 產出檔案 → 更新狀態
```

#### 執行步驟
1. **讀取工作指引**
   - 從 Serena Memory 讀取 `current_work_instructions.md`
   - 理解任務目標和技術要求
   - 確認產出規格和品質標準

2. **執行開發任務**
   - 按照步驟逐一執行
   - 遵循程式碼風格和命名慣例
   - 注意安全性和相容性要求

3. **即時狀態更新**
   ```markdown
   # 在 WORK_LOG.md 中更新
   [14:30] Cursor STARTED 開始執行步驟1
   [14:45] Cursor COMPLETED 步驟1完成，開始步驟2
   [15:00] Cursor IN_PROGRESS 步驟2進行中，預計15:30完成
   ```

4. **產出檔案記錄**
   ```markdown
   ## 產出檔案清單
   - `/docs/new_module.md` - 已建立 (14:45)
   - `/examples/demo.js` - 已建立 (15:00)
   ```

### Phase 4: 品質檢核 (Claude Code + Human)
```
自動檢查 → Claude Code 審查 → 人工確認 → 決定下一步
```

#### 執行步驟
1. **自動品質檢查**
   - 檢查檔案語法正確性
   - 驗證檔案結構完整性
   - 確認命名慣例遵循情況

2. **Claude Code 審查**
   - 檢視產出檔案的品質
   - 驗證是否符合需求規格
   - 評估與既有程式碼的整合性

3. **人工確認程序**
   ```markdown
   ## 人工確認檢核點
   - [ ] 功能正確性確認
   - [ ] 使用者體驗檢查
   - [ ] 安全性審查
   - [ ] 最終品質確認
   ```

### Phase 5: 迭代與優化 (Claude Code)
```
檢核結果 → 問題識別 → 改進計畫 → 下一輪執行
```

#### 執行步驟
1. **結果評估**
   - 分析檢核結果
   - 識別需要改進的地方
   - 評估整體任務完成度

2. **後續行動決定**
   - 如果滿足要求：標記任務完成
   - 如果需要修正：制定修正計畫
   - 如果需要擴展：規劃下一階段任務

## 🔧 實際操作範例

### 範例任務：建立新的教學模組

#### Step 1: Claude Code 接收需求
```
用戶需求: "請建立一個關於 Memory 管理的教學模組"
```

#### Step 2: Claude Code 制定計畫
```markdown
# 當前工作指引 - 建立 Memory 管理教學模組

## 任務目標
建立完整的 Memory 管理教學模組，包含理論說明和實作練習

## 執行步驟
### 步驟1: 建立模組檔案結構
- 建立 `/docs/memory_management.md`
- 使用標準教學模組範本

### 步驟2: 填寫教學內容
- 學習目標: 3-5個明確目標
- 核心概念: Memory 管理基礎知識
- 動手實驗: 2-3個實作練習

### 步驟3: 建立配套資源
- 建立 `/examples/memory_demo/` 資料夾
- 新增實作範例程式碼
```

#### Step 3: Cursor 執行任務
```markdown
# 工作紀錄更新
[14:00] Cursor STARTED 開始建立 Memory 管理模組
[14:15] Cursor COMPLETED 模組檔案結構建立完成
[14:30] Cursor IN_PROGRESS 正在填寫教學內容
[14:45] Cursor COMPLETED 教學內容填寫完成
[15:00] Cursor COMPLETED 配套資源建立完成
```

#### Step 4: 品質檢核
```markdown
## 檢核結果
- ✅ 檔案結構正確
- ✅ 內容符合範本格式
- ✅ 實作範例可執行
- ⏳ 待人工確認內容品質
```

#### Step 5: 人工確認與完成
```markdown
## 人工確認結果
- ✅ 內容對新手友善
- ✅ 實作練習具有教學價值
- ✅ 與既有課程銜接良好

## 任務狀態
COMPLETED - Memory 管理教學模組建立完成
```

## 🎯 協作成功要素

### 1. 清晰的溝通
- 使用標準化的狀態代碼
- 及時更新工作紀錄
- 明確的問題回報機制

### 2. 詳細的指引
- 具體的執行步驟
- 明確的產出規格
- 清楚的品質標準

### 3. 有效的品質控制
- 多層次的檢核機制
- 及時的問題發現和解決
- 持續的改進和優化

### 4. 靈活的調整
- 根據實際情況調整計畫
- 快速回應意外狀況
- 保持開放的溝通管道

## 📚 參考資源
- `claude_cursor_collaboration_guide.md` - 協作指南
- `work_log_template.md` - 工作紀錄範本
- `work_instructions_template.md` - 工作指引範本
- 其他專案相關的記憶體檔案